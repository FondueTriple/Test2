{% extends 'base.html' %}
{% block title %}Cave à vins — Liste{% endblock %}
{% block body %}

<p class="muted">Liste des bouteilles et ajout rapide.</p>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Nom</th>
      <th>Millésime</th>
      <th>Commentaires</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
  {% if bottles %}
    {% for b in bottles %}
    <tr>
      <td>{{ b.id }}</td>
      <td>
        <strong>{{ b.name }}</strong><br>
        {% if b.vivino_url %}<a class="muted" href="{{ b.vivino_url }}" target="_blank" rel="noopener">Vivino</a>{% endif %}
      </td>
      <td>{{ b.year }}</td>
      <td>
        {% if b.comments %}
          {% for c in b.comments %}<div class="muted">• {{ c }}</div>{% endfor %}
        {% else %}
          <span class="muted">(aucun)</span>
        {% endif %}
      </td>
      <td>
        <a class="btn" href="{{ url_for('edit_view', bid=b.id) }}">Éditer</a>
        <form class="row" method="post" action="{{ url_for('delete', bid=b.id) }}" style="display:inline" onsubmit="return confirm('Supprimer cette bouteille ?');">
          <button class="btn danger" type="submit">Supprimer</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  {% else %}
    <tr><td colspan="5" class="muted">Aucune bouteille</td></tr>
  {% endif %}
  </tbody>
  </table>

  <h2>Ajouter une bouteille</h2>
  <form method="post" action="{{ url_for('add') }}" class="grid">
    <label>Nom<br><input type="text" name="name" required></label>
    <label>Millésime<br><input type="number" name="year" min="1900" max="2100" required></label>
    <div class="row"><button class="btn" type="submit">Ajouter</button></div>
  </form>

{% endblock %}

